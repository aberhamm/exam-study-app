# Docker Compose Environment Variables
# Copy this file to .env.docker and fill in your values

# ==============================================
# Application Settings
# ==============================================
# Port to expose the application on the host machine
APP_PORT=3000

# Public/base URLs (update to the external host name if needed)
NEXT_PUBLIC_BASE_URL=http://localhost:${APP_PORT}
SITE_URL=http://localhost:${APP_PORT}
NEXT_PUBLIC_SITE_URL=http://localhost:${APP_PORT}

# ==============================================
# Supabase Authentication (Required)
# ==============================================
# Supabase handles all authentication via magic-link (OTP) emails.
# Create a Supabase project and copy these values from the dashboard.
NEXT_PUBLIC_SUPABASE_URL=your-supabase-project-url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-supabase-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-supabase-service-role-key

# ==============================================
# MongoDB Configuration (External)
# ==============================================
# Full MongoDB connection URI for your external database
# Examples:
#   Local: mongodb://localhost:27017
#   With auth: mongodb://username:password@host:27017
#   Atlas: mongodb+srv://username:password@cluster.mongodb.net
#   Tailscale: mongodb://your-host.tailxxxx.ts.net:27017
MONGODB_URI=mongodb://digital-ocean-ubuntu-droplet.tail4baa7.ts.net:27017

# Database name
MONGODB_DB=study-util

# ==============================================
# OpenAI / Embedding Configuration (Optional)
# ==============================================
# Required for embeddings when Portkey is disabled
OPENAI_API_KEY=
QUESTIONS_EMBEDDING_MODEL=text-embedding-3-small
# QUESTIONS_EMBEDDING_DIMENSIONS=1536

# ==============================================
# OpenRouter Configuration (Optional)
# ==============================================
# Used for question explanations when Portkey is disabled
OPENROUTER_API_KEY=
OPENROUTER_MODEL=anthropic/claude-3.5-sonnet

# ==============================================
# Portkey Gateway (Optional but recommended)
# ==============================================
# Set USE_PORTKEY=true to route all LLM traffic through Portkey.
USE_PORTKEY=false
PORTKEY_API_KEY=
PORTKEY_BASE_URL=https://api.portkey.ai/v1
PORTKEY_PROVIDER=
PORTKEY_MODEL=@anthropic/claude-3.5-sonnet
PORTKEY_MODEL_CHAT=@anthropic/claude-3.5-sonnet
PORTKEY_MODEL_EXPLANATION=@anthropic/claude-3.5-sonnet
PORTKEY_MODEL_QUESTION_GENERATION=@google/gemini-2.0-flash
PORTKEY_MODEL_EMBEDDINGS=@openai/text-embedding-3-small
PORTKEY_CUSTOM_HEADERS=
# For AWS Bedrock gateways, override with region-specific models, e.g.:
# PORTKEY_PROVIDER=@aws-bedrock-use2
# PORTKEY_MODEL_CHAT=us.anthropic.claude-sonnet-4-20250514-v1:0
# PORTKEY_MODEL_EXPLANATION=us.anthropic.claude-sonnet-4-20250514-v1:0
# PORTKEY_MODEL_EMBEDDINGS=amazon.titan-embed-text-v1

# ==============================================
# Feature Flags / Diagnostics
# ==============================================
# Debug retrieval and RAG pipeline (verbose logging)
# DEBUG_RETRIEVAL=false
# NEXT_PUBLIC_DEBUG_RETRIEVAL=false

# API configuration
# API_TIMEOUT_MS=30000
# MAX_RETRIES=3

# ==============================================
# Notes
# ==============================================
# - Users must already exist in Supabase and authenticate via magic-link email.
# - Run supabase-schema.sql in your Supabase project to install claims helpers.
# - MongoDB collection names and vector index names are hardcoded in lib/env-config.ts.
